@(recipesWithForm: List[(Recipe, Form[RecipeServing])])(implicit navBarData: NavBarData, flash: Flash)

@import helper._

@groceryListWrapper("Recipes") {
  <div class="panel-group" id="accordion">
  @for(i <- 0 until recipesWithForm.length) {
    @defining(recipesWithForm.drop(i).head) { case (recipe, recipeServingForm) =>
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a data-toggle="collapse" data-parent="#accordion" href="#collapse@i">
          @recipe.name
          </a>
        </h4>
      </div>
      <div id="collapse@i" class="panel-collapse collapse">
        <div class="panel-body">
          <div>
            <ul>
              <li>
              @form(action = routes.GroceryListController.addRecipeServings(navBarData.activeGroceryListName.getOrElse(""))) {
                @inputText(recipeServingForm("name"), 'style -> "display: None")
                @inputText(recipeServingForm("desiredServings"), '_label -> "Servings", 'style -> "display: inline")
                <input type="submit" value="Add Servings" style="display : inline">
                }
              </li>
              <li>Makes @recipe.servings Servings</li>
              <li>Included Recipes
                <table>
                @for(includedRecipe <- recipe.recipeIngredients) {
                  <tr>
                    <td>@includedRecipe.name</td>
                    <td>@includedRecipe.desiredServings Servings</td>
                  </tr>
                }
                </table>
              </li>
              <li>Standalone Ingredients
                <table>
                @for(ingredient <- recipe.foodIngredients) {
                  <tr>
                    <td>@ingredient.food</td>
                    <td>@ingredient.quantity</td>
                    <td>@ingredient.unit.getOrElse("")</td>
                  </tr>
                }
                </table>
              </li>
              <li>Directions<br/>
                @recipe.directions.getOrElse("")</li>
    </ul>
    </div>
    </div>
    </div>
    </div>
    }
  }
  </div>
}